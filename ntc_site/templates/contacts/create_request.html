{% extends "base.html" %}
{% load django_bootstrap5 %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body p-4">

          <h2 class="card-title text-center mb-4">Создать обращение</h2>

          <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}

            {% if not '/delete/' in request.path %}
              {# Рендерим форму с помощью bootstrap_form #}
              {% bootstrap_form form %}
            {% else %}
              {# При удалении показываем значения полей для подтверждения #}
              <p><strong>Имя:</strong> {{ form.instance.first_name }}</p>
              <p><strong>Фамилия:</strong> {{ form.instance.last_name }}</p>
              <p><strong>e-mail:</strong> {{ form.instance.email }}</p>
              <p><strong>Номер телефона:</strong> {{ form.instance.phone_number }}</p>
              <p><strong>Текст обращения:</strong> {{ form.instance.text }}</p>
            {% endif %}

            {% bootstrap_button button_type="submit" content="Отправить" class="w-100 mt-3" %}
          </form>

          {% with data=form.instance %}
            {% if form.is_valid %}
              <div class="alert alert-success mt-4 text-center" role="alert">
                Обращение успешно отправлено!
              </div>
            {% endif %}
          {% endwith %}

        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}